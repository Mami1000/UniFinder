<div class="modal-overlay">
  <div class="modal-content" role="dialog" aria-modal="true">
    <mat-card class="result-card">
      <mat-card-content>
  <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
  <button class="modal-close-button" (click)="onClose()">‚úï</button>
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –±–∞–ª–ª—ã -->
        <div class="result-header">
          <mat-icon class="result-icon" color="primary">check_circle</mat-icon>
          <h2 class="result-title">{{ resultData?.finishSuccess }}</h2>
        </div>

        <!-- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ -->
        <div class="result-details">
          <p class="result-summary">
            –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong>{{ resultData?.correctCount }}</strong> –∏–∑ <strong>{{ resultData?.totalQuestions }}</strong>
          </p>

          <!-- –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
          <div class="category-results" *ngIf="resultData?.categoryResults">
            <div class="category-item" *ngFor="let cat of (resultData?.categoryResults | keyvalue)">
              <span class="cat-name">{{ cat.value.name }}</span>: 
              <span class="cat-stats">{{ cat.value.correct }} –∏–∑ {{ cat.value.total }}</span>
            </div>
          </div>
        </div>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
        <div class="recommendations-section" *ngIf="recommendations?.length">
          <h3>üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—é</h3>
          <div class="university-block" *ngFor="let rec of recommendations">
            <h4 class="university-name">{{ rec.university }} <span class="location">({{ rec.location }})</span></h4>
            <ul class="program-list">
              <li *ngFor="let prog of rec.programs">
                <strong>{{ prog.name }}</strong> ‚Äî {{ prog.faculty }} ({{ prog.type }}, –ø—Ä–æ—Ö–æ–¥–Ω–æ–π: {{ prog.minScore }})
              </li>
            </ul>
          </div>
        </div>
        <!-- –ï—Å–ª–∏ –Ω–µ —Å–º–æ–≥ –Ω–∞–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π –±–∞–ª —Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º... -->
  <div class="closest-profession-section" *ngIf="(!recommendations || recommendations.length === 0) && closestProfession">
    <h3>üîç –ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–π, –Ω–æ –±–ª–∏–∂–∞–π—à–∞—è ‚Äî</h3>
    <p>
      –î–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–∞ <strong>{{ closestProfession.name }}</strong> 
      ({{ closestProfession.type === 'paid' ? '–ø–ª–∞—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ' : '–±—é–¥–∂–µ—Ç' }}) 
      –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç <strong>{{ neededPoints }}</strong> –±–∞–ª–ª–æ–≤.
    </p>
    <div class="university-info">
      <p><strong>–§–∞–∫—É–ª—å—Ç–µ—Ç:</strong> {{ closestProfession.faculty }}</p>
      <p><strong>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç:</strong> {{ closestProfession.university }}</p>
      <p><strong>–ê–¥—Ä–µ—Å:</strong> {{ closestProfession.location }}</p>
      <!-- <img 
        *ngIf="closestProfession.logoUrl" 
        [src]="'/uploads/' + closestProfession.logoUrl" 
        alt="–õ–æ–≥–æ—Ç–∏–ø –í–£–ó–∞" 
        width="120" /> -->
    </div>
  </div>
        <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –ø–æ—á—Ç—É -->
        <div class="modal-actions">
          <button mat-raised-button 
                  color="primary" 
                  class="send-email-button" 
                  (click)="onSendEmail()" 
                  [disabled]="emailSent">
            {{ emailSent ? '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –ø–æ—á—Ç—É' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –ø–æ—á—Ç—É' }}
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
